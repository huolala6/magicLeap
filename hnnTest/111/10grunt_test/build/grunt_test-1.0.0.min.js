/*! grunt_test-1.0.0.js 2018-10-08 */
function api(){this.multiple=5,this.maxZoom=3,MeowGodThree.wrapper=document.getElementById("wrapper"),this.initDefaultApp(),api_this=this}var timer=null,_isMove=!1,api_this=null;api.prototype.initDefaultApp=function(){MeowGodThree.Util.createScript("dist/js/Genesis.js",function(){api_this.multiple=15,MeowGodThree.Genesis.init(api_this.onWindowScroll)}),this.bindEvent()},api.prototype.init=function(a){this.bindEvent()},api.prototype.bindEvent=function(){this.updateWrapper(),window.addEventListener("resize",this.onWindowResize.bind(this),!1),window.addEventListener("scroll",this.onWindowScroll.bind(this),!1)},api.prototype.updateWrapper=function(){var a=changeWH.w(),b=changeWH.h();isPCFlag||(isPortrait?(a=changeWH.w(),b=changeWH.h()):(a=changeWH.h()>=changeWH.w()?changeWH.h():changeWH.w(),b=changeWH.h()<changeWH.w()?changeWH.h():changeWH.w())),MeowGodThree.wrapper.style.height=b*this.maxZoom+"px"},api.prototype.stopAnimation=function(){MeowGodThree.animationId&&(cancelAnimationFrame(MeowGodThree.animationId),MeowGodThree.animationId=null)},api.prototype.onBlurAnimation=function(){window.onblur=function(){ThreeApp.stopAnimation()},window.onfocus=function(){MeowGodThree.animationId||ThreeApp.initPlugin("animate")}},api.prototype.onMouseMove=function(){MeowGodThree.wrapper.addEventListener("mousemove",function(){_isMove?(clearTimeout(timer),MeowGodThree.animationId||(ThreeApp.initPlugin("animate"),_isMove=!1)):(clearTimeout(timer),timer=setTimeout(function(){ThreeApp.stopAnimation(),_isMove=!0},18e4))}),MeowGodThree.wrapper.addEventListener("mouseenter",function(){MeowGodThree.animationId||ThreeApp.initPlugin("animate")}),MeowGodThree.wrapper.addEventListener("mouseleave",function(){clearTimeout(timer),ThreeApp.stopAnimation()})},api.prototype.onWindowResize=function(){this.updateWrapper(),ThreeApp.initPlugin("resize")},api.prototype.onWindowScroll=function(a){var b=changeWH.w(),c=changeWH.h();isPCFlag||(isPortrait?(b=changeWH.w(),c=changeWH.h()):(b=changeWH.h()>=changeWH.w()?changeWH.h():changeWH.w(),c=changeWH.h()<changeWH.w()?changeWH.h():changeWH.w()));var d=c*ThreeApp.maxZoom,e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,f=d*(ThreeApp.maxZoom-1)/ThreeApp.maxZoom;e>=d?(clearTimeout(timer),ThreeApp.stopAnimation()):MeowGodThree.animationId||(ThreeApp.initPlugin("animate"),clearTimeout(timer),timer=setTimeout(function(){ThreeApp.stopAnimation()},18e4)),ThreeApp.canvas&&(ThreeApp.canvas.className=""),ThreeApp.canvas1&&(ThreeApp.canvas1.className=""),e>f&&(ThreeApp.canvas?ThreeApp.canvas.className="sticky":(ThreeApp.canvas=MeowGodThree.wrapper.getElementsByTagName("canvas")[0],ThreeApp.canvas&&(ThreeApp.canvas.className="sticky")),ThreeApp.canvas1?ThreeApp.canvas1.className="sticky":(ThreeApp.canvas1=MeowGodThree.wrapper.getElementsByTagName("canvas")[1],ThreeApp.canvas1&&(ThreeApp.canvas1.className="sticky")),e=f);var g=ThreeApp.maxZoom*ThreeApp.multiple*e/d;ThreeApp.initPlugin("camera",g)},api.prototype.initPlugin=function(a,b){if("animate"===a)MeowGodThree.Genesis&&MeowGodThree.Genesis.animate(MeowGodThree.Genesis);else if("resize"===a)MeowGodThree.Genesis&&MeowGodThree.Genesis.onWindowResize(),this.onWindowScroll();else if("camera"===a&&MeowGodThree.Genesis&&MeowGodThree.Genesis.camera){var c=b*ThreeApp.multiple+30;MeowGodThree.Genesis.camera.position.z=c,MeowGodThree.Genesis.thirdcamera.position.z=c,MeowGodThree.Genesis.maskPass.uniforms.viewNum.value=1.377-.0026*c}};var ThreeApp=new api;